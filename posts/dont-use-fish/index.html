<!doctype html><html lang=zh-Hans><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Don't Use Fish Shell
</title><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Laila:wght@300;400;500;600;700&family=Piazzolla:ital,opsz,wght@0,8..30,300;0,8..30,400;0,8..30,500;0,8..30,600;0,8..30,700;1,8..30,300;1,8..30,400;1,8..30,500;1,8..30,600;1,8..30,700&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel=stylesheet><link rel=stylesheet href=/css/main.css></head><body a=auto><main class=page-content aria-label=Content><div class=w><a href=/>..</a><article><p class=post-meta><time datetime="2023-11-14 00:19:10 +0800 +0800">2023-11-14</time></p><h1>Don't Use Fish Shell</h1><p>So, you must have heard the <a href=https://fishshell.com/>fish shell</a>, which is &ldquo;a smart and user-friendly command line shell&rdquo;. I am not those old-school guys who are against new things, but I just want to give a rough analysis of why I don&rsquo;t use fish as my shell.</p><h1 id=metrics-of-a-good-shell>Metrics of a Good Shell</h1><p>A shell has three main use cases: to run commands and scripts, to write scripts, and to interact with the shell itself. So, a good shell should be good at all these three use cases. However there is no such a shell that does well in all these field as far as I know. So there is always a trade-off. And, despite there are actually plenty of shells, most of them can be categorized into three groups by their main advantages. That is:</p><ul><li>compatible shells which are somehow compatible with the POSIX standard and can run most of the scripts written for POSIX shells like bash, and zsh is the most popular one for now in this group;</li><li>scripting shells, which ships with a well-designed scripting language, like <a href=https://github.com/PowerShell/PowerShell>pwsh (PowerShell Core)</a> and <a href=https://www.nushell.sh/>nushell</a>, which are both cross-platform and ferature &ldquo;data rather than text&rdquo; as their main design principle;</li><li>and interactive shells, which provides features like auto-completion, highlighting, etc. for friendly interactive use, and fish is the most popular one in this group.</li></ul><p>The reason why I do not recommend fish is that, it only does well in the interactive use case, and there are shells (the ones I mentioned above) that are better than fish in the other two use cases while still providing a good interactive experience.</p><h1 id=what-fish-and-other-interactive-shells-does-well-is-not-unique>What Fish (and Other Interactive Shells) Does Well is Not Unique</h1><p>The main advantage of fish is that it provides a good interactive experience. It has out-of-box features like auto-completion, auto-suggestion and syntax highlighting. And that&rsquo;s all the advantages of fish.</p><p>On the other hand, it is easy, and maybe much easier than you think, to make other shells provide the same features.</p><p>For zsh, there are plenty of plugins, and installing them is usually just several lines of code in your <code>.zshrc</code>. By the way, do not use oh-my-zsh either, as it is very, very slow and too heavy. There are other frameworks like <a href=https://github.com/zimfw/zimfw>zimfw</a> and <a href=https://github.com/zdharma-continuum/zinit>zinit</a> that are fast and feature-rich, and even manually configuring zsh is not that hard.</p><p>As to those scripting shells, actually they almost provides the same features as fish. For example, pwsh has <a href=https://github.com/PowerShell/PSReadLine>PSReadLine</a>, which provides auto-completion, auto-suggestion and syntax highlighting just by installing it. And nushell has these features built-in. And writing one line script in pwsh or nushell is much more elegent than in fish.</p><p>The only thing that fish does better than other shells is auto-completion for arbitrary commands, which is either not supported or relies heavily on plugins. However, there is actually some &ldquo;universal completion frameworks&rdquo; for <em>all</em> shells. Here I suggest <a href=https://github.com/rsteube/carapace-bin>carapace</a>, which is really easy to use and provides a lot of completions. And <a href=https://github.com/junegunn/fzf>fzf</a> can be used as a completion engine with fuzzy matching and optional preview window, which is really cool. See <a href=https://github.com/Aloxaf/fzf-tab>fzf-tab</a> for zsh and <a href=https://github.com/kelleyma49/PSFzf>PSFzf</a> for pwsh.</p><h1 id=what-fish-does-bad-is-unique>What Fish Does Bad is Unique</h1><p>Use fish as your shell means that:</p><ul><li>you cannot simply source some scripts generated by tons of tools,</li><li>you cannot simply run some programs as they assume a POSIX shell, or generate scripts for POSIX shells,</li><li>and you cannot even copy and paste some commands sometimes.
And, fish as a language is not that good. It lacks some features important for a scripting language, and some of the design choices for the language is weird.</li></ul><h1 id=my-suggestion>My suggestion</h1><p>Configure zsh in minutes, and if you do not live in the terminal, that&rsquo;s enough.
If you usually write one-line scripts that uses more than one pipe or scripts that are no longer than ~10 lines, use pwsh or nushell, but only as default start program for the terminal simulator, not as the login shell. Pwsh is the better choice if you use Windows sometimes. (And, if you want to write scripts that are longer than ~10 lines, you should give up that idea and use a real programming language that cares about your mental health.)</p></article></div></main></body></html>